var I=(b,m,r)=>new Promise((u,v)=>{var f=g=>{try{d(r.next(g))}catch(y){v(y)}},c=g=>{try{d(r.throw(g))}catch(y){v(y)}},d=g=>g.done?u(g.value):Promise.resolve(g.value).then(f,c);d((r=r.apply(b,m)).next())});import{_ as E,r as p,c as l,F as M,a as $,o as i,b as t,d as x,t as L,n as B,w as F,e as A,f as G,g as z,h as H,i as W,j,v as J,k as K,l as N,m as O}from"./index-Djwtsv3K.js";import{g as P,a as Q,b as X,c as T,d as Y}from"./api-CiY-y9bc.js";const Z={class:"menu-bar"},ee=["onMouseenter","onMouseleave"],te=["onClick"],ne=["onClick"],oe={__name:"MenuBar",props:{menus:Array,activeId:Number,activeSubMenuId:Number},setup(b){const m=p(null);function r(v){m.value=v}function u(v){setTimeout(()=>{m.value===v&&(m.value=null)},100)}return(v,f)=>(i(),l("nav",Z,[(i(!0),l(M,null,$(b.menus,c=>(i(),l("div",{key:c.id,class:"menu-item",onMouseenter:d=>r(c.id),onMouseleave:d=>u(c.id)},[t("button",{onClick:d=>v.$emit("select",c),class:B({active:c.id===b.activeId})},L(c.name),11,te),c.subMenus&&c.subMenus.length>0?(i(),l("div",{key:0,class:B(["sub-menu",{show:m.value===c.id}])},[(i(!0),l(M,null,$(c.subMenus,d=>(i(),l("button",{key:d.id,onClick:g=>v.$emit("select",d,c),class:B([{active:d.id===b.activeSubMenuId},"sub-menu-item"])},L(d.name),11,ne))),128))],2)):x("",!0)],40,ee))),128))]))}},ae=E(oe,[["__scopeId","data-v-3b1540c1"]]),se=["href","title"],le=["src","onError"],ie={class:"link-text"},re={__name:"CardGrid",props:{cards:Array},setup(b){const m=b,r=p(""),u=p("slideUp");F(()=>m.cards,(e,h)=>{e&&e.length>0&&(!h||h.length===0||JSON.stringify(e)!==JSON.stringify(h))&&G(()=>{v()})},{deep:!0,immediate:!1});function v(){const e=["slideUp","radial","fadeIn","slideLeft","slideRight","convergeIn","flipIn"],h=Math.floor(Math.random()*e.length);u.value=e[h],r.value=`animate-${u.value}`,setTimeout(()=>{r.value=""},1200)}function f(e){if(!r.value)return{};if(window.innerWidth<=480)return{animationDelay:"0s"};if(u.value==="slideUp")return{animationDelay:`${e*.05}s`};if(u.value==="radial"){const s=window.innerWidth<=768?3:window.innerWidth<=1200?4:6,w=Math.floor(e/s),_=e%s,S=Math.floor(s/2);return{animationDelay:`${(Math.abs(_-S)+w)*.08}s`}}else{if(u.value==="fadeIn")return{animationDelay:`${Math.random()*.5}s`};if(u.value==="slideLeft"){const s=window.innerWidth<=768?3:window.innerWidth<=1200?4:6;return{animationDelay:`${Math.floor(e/s)*.1}s`}}else if(u.value==="slideRight"){const s=window.innerWidth<=768?3:window.innerWidth<=1200?4:6,w=Math.floor(e/s),_=e%s;return{animationDelay:`${(w+(s-_-1)*.02)*.08}s`}}else if(u.value==="convergeIn"){const s=window.innerWidth<=768?3:window.innerWidth<=1200?4:6,w=e%s,_=Math.floor(s/2),S=Math.abs(w-_);return{animationDelay:`${(s-S-1)*.08}s`}}else if(u.value==="flipIn"){const s=window.innerWidth<=768?3:window.innerWidth<=1200?4:6,w=Math.floor(e/s),_=e%s;return{animationDelay:`${(w+_)*.06}s`}}}return{}}function c(e){if(e.custom_logo_path)return"http://localhost:3000/uploads/"+e.custom_logo_path;if(e.logo_url)return e.logo_url;try{return new URL(e.url).origin+"/favicon.ico"}catch(h){return"/default-favicon.png"}}function d(e,h){e.target.src="/default-favicon.png"}function g(e){let h="";return e.desc&&(h+=e.desc+`
`),h+=e.url,h}function y(e){return e?e.length>20?e.slice(0,20)+"...":e:""}return(e,h)=>(i(),l("div",{class:B(["container card-grid",r.value])},[(i(!0),l(M,null,$(b.cards,(s,w)=>(i(),l("div",{key:s.id,class:"link-item",style:A(f(w))},[t("a",{href:s.url,target:"_blank",title:g(s)},[t("img",{class:"link-icon",src:c(s),alt:"",onError:_=>d(_),loading:"lazy"},null,40,le),t("span",ie,L(y(s.title)),1)],8,se)],4))),128))],2))}},ce=E(re,[["__scopeId","data-v-da4ab731"]]),ue={class:"menu-bar-fixed"},de={class:"search-section"},he={class:"search-box-wrapper"},ve={class:"search-engine-select"},fe=["onClick"],ge={class:"search-container"},me=["placeholder"],pe={key:0,class:"ad-space-fixed left-ad-fixed"},we=["href"],_e=["src"],be={key:1,class:"ad-space-fixed right-ad-fixed"},ke=["href"],ye=["src"],Ce={class:"footer"},Me={class:"footer-content"},$e={class:"modal-header"},Ie={class:"modal-body"},Le={class:"friend-links-grid"},Se=["href"],xe={class:"friend-link-logo"},Be=["src","alt"],De={key:1,class:"friend-link-placeholder"},Ee={class:"friend-link-info"},Re={__name:"Home",setup(b){const m=p([]),r=p(null),u=p(null),v=p([]),f=p(""),c=p([]),d=p([]),g=p(!1),y=p([]),e=p("https://link.tyrlink.dpdns.org/anyuan.png"),h=[{name:"google",label:"Google",placeholder:"Google 搜索...",url:n=>`https://www.google.com/search?q=${encodeURIComponent(n)}`},{name:"baidu",label:"百度",placeholder:"百度搜索...",url:n=>`https://www.baidu.com/s?wd=${encodeURIComponent(n)}`},{name:"bing",label:"Bing",placeholder:"Bing 搜索...",url:n=>`https://www.bing.com/search?q=${encodeURIComponent(n)}`},{name:"github",label:"github",placeholder:"GitHub 搜索...",url:n=>`https://github.com/search?q=${encodeURIComponent(n)}&type=repositories`},{name:"site",label:"站内",placeholder:"站内搜索...",url:n=>`/search?query=${encodeURIComponent(n)}`}],s=p(h[0]);function w(n){s.value=n}function _(){f.value=""}const S=z(()=>f.value?v.value.filter(n=>n.title.toLowerCase().includes(f.value.toLowerCase())||n.url.toLowerCase().includes(f.value.toLowerCase())):v.value);function D(){return I(this,null,function*(){try{const n=yield Y();n.data.url&&(e.value=n.data.url)}catch(n){console.error("获取背景图片失败:",n)}})}H(()=>I(null,null,function*(){yield D();const n=yield P();m.value=n.data,m.value.length&&(r.value=m.value[0],R());const o=yield Q();c.value=o.data.filter(k=>k.position==="left"),d.value=o.data.filter(k=>k.position==="right");const C=yield X();y.value=C.data,document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&D()})}));function V(n,o=null){return I(this,null,function*(){o?(r.value=o,u.value=n):(r.value=n,u.value=null),R()})}function R(){return I(this,null,function*(){var o;if(!r.value)return;const n=yield T(r.value.id,(o=u.value)==null?void 0:o.id);v.value=n.data})}function U(){return I(this,null,function*(){if(f.value.trim())if(s.value.name==="site"){let n=!1;for(const o of m.value){const C=yield T(o.id),k=C.data.find(a=>a.title.toLowerCase().includes(f.value.toLowerCase())||a.url.toLowerCase().includes(f.value.toLowerCase()));if(k){r.value=o,v.value=C.data,setTimeout(()=>{const a=document.querySelector(`[data-card-id='${k.id}']`);a&&a.scrollIntoView({behavior:"smooth",block:"center"})},100),n=!0;break}}n||alert("未找到相关内容")}else{const n=s.value.url(f.value);window.open(n,"_blank")}})}function q(n){n.target.style.display="none",n.target.nextElementSibling.style.display="flex"}return(n,o)=>{var C,k;return i(),l("div",{class:"home-container",style:A({backgroundImage:`url('${e.value}')`})},[t("div",ue,[W(ae,{menus:m.value,activeId:(C=r.value)==null?void 0:C.id,activeSubMenuId:(k=u.value)==null?void 0:k.id,onSelect:V},null,8,["menus","activeId","activeSubMenuId"])]),t("div",de,[t("div",he,[t("div",ve,[(i(),l(M,null,$(h,a=>t("button",{key:a.name,class:B(["engine-btn",{active:s.value.name===a.name}]),onClick:Ue=>w(a)},L(a.label),11,fe)),64))]),t("div",ge,[j(t("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>f.value=a),type:"text",placeholder:s.value.placeholder,class:"search-input",onKeyup:K(U,["enter"])},null,40,me),[[J,f.value]]),f.value?(i(),l("button",{key:0,class:"clear-btn",onClick:_,"aria-label":"清空",title:"clear"},o[5]||(o[5]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))):x("",!0),t("button",{onClick:U,class:"search-btn",title:"search"},o[6]||(o[6]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])])]),c.value.length?(i(),l("div",pe,[(i(!0),l(M,null,$(c.value,a=>(i(),l("a",{key:a.id,href:a.url,target:"_blank"},[t("img",{src:a.img,alt:"广告"},null,8,_e)],8,we))),128))])):x("",!0),d.value.length?(i(),l("div",be,[(i(!0),l(M,null,$(d.value,a=>(i(),l("a",{key:a.id,href:a.url,target:"_blank"},[t("img",{src:a.img,alt:"广告"},null,8,ye)],8,ke))),128))])):x("",!0),W(ce,{cards:S.value},null,8,["cards"]),t("footer",Ce,[t("div",Me,[t("button",{onClick:o[1]||(o[1]=a=>g.value=!0),class:"friend-link-btn"},o[7]||(o[7]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),t("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1),N(" 友情链接 ")])),o[8]||(o[8]=t("p",{class:"copyright"},[N("Copyright © 2025 Nav-Item | "),t("a",{href:"https://github.com/eooce/Nav-Item",target:"_blank",class:"footer-link"},"Powered by eooce")],-1))])]),g.value?(i(),l("div",{key:2,class:"modal-overlay",onClick:o[4]||(o[4]=a=>g.value=!1)},[t("div",{class:"modal-content",onClick:o[3]||(o[3]=O(()=>{},["stop"]))},[t("div",$e,[o[10]||(o[10]=t("h3",null,"友情链接",-1)),t("button",{onClick:o[2]||(o[2]=a=>g.value=!1),class:"close-btn"},o[9]||(o[9]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",Ie,[t("div",Le,[(i(!0),l(M,null,$(y.value,a=>(i(),l("a",{key:a.id,href:a.url,target:"_blank",class:"friend-link-card"},[t("div",xe,[a.logo?(i(),l("img",{key:0,src:a.logo,alt:a.title,onError:q},null,40,Be)):(i(),l("div",De,L(a.title.charAt(0)),1))]),t("div",Ee,[t("h4",null,L(a.title),1)])],8,Se))),128))])])])])):x("",!0)],4)}}},Ae=E(Re,[["__scopeId","data-v-74e310fb"]]);export{Ae as default};
