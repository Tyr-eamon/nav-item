var S=(k,m,r)=>new Promise((u,v)=>{var f=g=>{try{d(r.next(g))}catch(y){v(y)}},c=g=>{try{d(r.throw(g))}catch(y){v(y)}},d=g=>g.done?u(g.value):Promise.resolve(g.value).then(f,c);d((r=r.apply(k,m)).next())});import{_ as D,r as w,c as s,F as M,a as $,o as i,b as t,d as x,t as I,n as B,w as q,e as A,f as F,g as G,h as z,i as E,j as H,v as j,k as J,l as N,m as K}from"./index-B2BPdq52.js";import{g as O,a as P,b as Q,c as X,d as T}from"./api-C2xAtNMj.js";const Y={class:"menu-bar"},Z=["onMouseenter","onMouseleave"],ee=["onClick"],te=["onClick"],ne={__name:"MenuBar",props:{menus:Array,activeId:Number,activeSubMenuId:Number},setup(k){const m=w(null);function r(v){m.value=v}function u(v){setTimeout(()=>{m.value===v&&(m.value=null)},100)}return(v,f)=>(i(),s("nav",Y,[(i(!0),s(M,null,$(k.menus,c=>(i(),s("div",{key:c.id,class:"menu-item",onMouseenter:d=>r(c.id),onMouseleave:d=>u(c.id)},[t("button",{onClick:d=>v.$emit("select",c),class:B({active:c.id===k.activeId})},I(c.name),11,ee),c.subMenus&&c.subMenus.length>0?(i(),s("div",{key:0,class:B(["sub-menu",{show:m.value===c.id}])},[(i(!0),s(M,null,$(c.subMenus,d=>(i(),s("button",{key:d.id,onClick:g=>v.$emit("select",d,c),class:B([{active:d.id===k.activeSubMenuId},"sub-menu-item"])},I(d.name),11,te))),128))],2)):x("",!0)],40,Z))),128))]))}},oe=D(ne,[["__scopeId","data-v-3b1540c1"]]),ae=["href","title"],le=["src","onError"],se={class:"link-text"},ie={__name:"CardGrid",props:{cards:Array},setup(k){const m=k,r=w(""),u=w("slideUp");q(()=>m.cards,(e,h)=>{e&&e.length>0&&(!h||h.length===0||JSON.stringify(e)!==JSON.stringify(h))&&F(()=>{v()})},{deep:!0,immediate:!1});function v(){const e=["slideUp","radial","fadeIn","slideLeft","slideRight","convergeIn","flipIn"],h=Math.floor(Math.random()*e.length);u.value=e[h],r.value=`animate-${u.value}`,setTimeout(()=>{r.value=""},1200)}function f(e){if(!r.value)return{};if(window.innerWidth<=480)return{animationDelay:"0s"};if(u.value==="slideUp")return{animationDelay:`${e*.05}s`};if(u.value==="radial"){const l=window.innerWidth<=768?3:window.innerWidth<=1200?4:6,_=Math.floor(e/l),b=e%l,L=Math.floor(l/2);return{animationDelay:`${(Math.abs(b-L)+_)*.08}s`}}else{if(u.value==="fadeIn")return{animationDelay:`${Math.random()*.5}s`};if(u.value==="slideLeft"){const l=window.innerWidth<=768?3:window.innerWidth<=1200?4:6;return{animationDelay:`${Math.floor(e/l)*.1}s`}}else if(u.value==="slideRight"){const l=window.innerWidth<=768?3:window.innerWidth<=1200?4:6,_=Math.floor(e/l),b=e%l;return{animationDelay:`${(_+(l-b-1)*.02)*.08}s`}}else if(u.value==="convergeIn"){const l=window.innerWidth<=768?3:window.innerWidth<=1200?4:6,_=e%l,b=Math.floor(l/2),L=Math.abs(_-b);return{animationDelay:`${(l-L-1)*.08}s`}}else if(u.value==="flipIn"){const l=window.innerWidth<=768?3:window.innerWidth<=1200?4:6,_=Math.floor(e/l),b=e%l;return{animationDelay:`${(_+b)*.06}s`}}}return{}}function c(e){if(e.custom_logo_path)return"http://localhost:3000/uploads/"+e.custom_logo_path;if(e.logo_url)return e.logo_url;try{return new URL(e.url).origin+"/favicon.ico"}catch(h){return"/default-favicon.png"}}function d(e,h){e.target.src="/default-favicon.png"}function g(e){let h="";return e.desc&&(h+=e.desc+`
`),h+=e.url,h}function y(e){return e?e.length>20?e.slice(0,20)+"...":e:""}return(e,h)=>(i(),s("div",{class:B(["container card-grid",r.value])},[(i(!0),s(M,null,$(k.cards,(l,_)=>(i(),s("div",{key:l.id,class:"link-item",style:A(f(_))},[t("a",{href:l.url,target:"_blank",title:g(l)},[t("img",{class:"link-icon",src:c(l),alt:"",onError:b=>d(b),loading:"lazy"},null,40,le),t("span",se,I(y(l.title)),1)],8,ae)],4))),128))],2))}},re=D(ie,[["__scopeId","data-v-da4ab731"]]),ce={class:"menu-bar-fixed"},ue={class:"search-section"},de={class:"search-box-wrapper"},he={class:"search-engine-select"},ve=["onClick"],fe={class:"search-container"},ge=["placeholder"],me={key:0,class:"ad-space-fixed left-ad-fixed"},pe=["href"],we=["src"],_e={key:1,class:"ad-space-fixed right-ad-fixed"},be=["href"],ke=["src"],ye={class:"footer"},Ce={class:"footer-content"},Me={class:"modal-header"},$e={class:"modal-body"},Ie={class:"friend-links-grid"},Le=["href"],Se={class:"friend-link-logo"},xe=["src","alt"],Be={key:1,class:"friend-link-placeholder"},De={class:"friend-link-info"},Re={__name:"Home",setup(k){const m=w([]),r=w(null),u=w(null),v=w([]),f=w(""),c=w([]),d=w([]),g=w(!1),y=w([]),e=w("https://link.tyrlink.dpdns.org/anyuan.png"),h=[{name:"google",label:"Google",placeholder:"Google 搜索...",url:a=>`https://www.google.com/search?q=${encodeURIComponent(a)}`},{name:"baidu",label:"百度",placeholder:"百度搜索...",url:a=>`https://www.baidu.com/s?wd=${encodeURIComponent(a)}`},{name:"bing",label:"Bing",placeholder:"Bing 搜索...",url:a=>`https://www.bing.com/search?q=${encodeURIComponent(a)}`},{name:"github",label:"github",placeholder:"GitHub 搜索...",url:a=>`https://github.com/search?q=${encodeURIComponent(a)}&type=repositories`},{name:"site",label:"站内",placeholder:"站内搜索...",url:a=>`/search?query=${encodeURIComponent(a)}`}],l=w(h[0]);function _(a){l.value=a}function b(){f.value=""}const L=G(()=>f.value?v.value.filter(a=>a.title.toLowerCase().includes(f.value.toLowerCase())||a.url.toLowerCase().includes(f.value.toLowerCase())):v.value);z(()=>S(null,null,function*(){try{const p=yield O();p.data.url&&(e.value=p.data.url)}catch(p){console.error("获取背景图片失败:",p)}const a=yield P();m.value=a.data,m.value.length&&(r.value=m.value[0],U());const n=yield Q();c.value=n.data.filter(p=>p.position==="left"),d.value=n.data.filter(p=>p.position==="right");const C=yield X();y.value=C.data}));function R(a,n=null){return S(this,null,function*(){n?(r.value=n,u.value=a):(r.value=a,u.value=null),U()})}function U(){return S(this,null,function*(){var n;if(!r.value)return;const a=yield T(r.value.id,(n=u.value)==null?void 0:n.id);v.value=a.data})}function W(){return S(this,null,function*(){if(f.value.trim())if(l.value.name==="site"){let a=!1;for(const n of m.value){const C=yield T(n.id),p=C.data.find(o=>o.title.toLowerCase().includes(f.value.toLowerCase())||o.url.toLowerCase().includes(f.value.toLowerCase()));if(p){r.value=n,v.value=C.data,setTimeout(()=>{const o=document.querySelector(`[data-card-id='${p.id}']`);o&&o.scrollIntoView({behavior:"smooth",block:"center"})},100),a=!0;break}}a||alert("未找到相关内容")}else{const a=l.value.url(f.value);window.open(a,"_blank")}})}function V(a){a.target.style.display="none",a.target.nextElementSibling.style.display="flex"}return(a,n)=>{var C,p;return i(),s("div",{class:"home-container",style:A({backgroundImage:`url('${e.value}')`})},[t("div",ce,[E(oe,{menus:m.value,activeId:(C=r.value)==null?void 0:C.id,activeSubMenuId:(p=u.value)==null?void 0:p.id,onSelect:R},null,8,["menus","activeId","activeSubMenuId"])]),t("div",ue,[t("div",de,[t("div",he,[(i(),s(M,null,$(h,o=>t("button",{key:o.name,class:B(["engine-btn",{active:l.value.name===o.name}]),onClick:Ue=>_(o)},I(o.label),11,ve)),64))]),t("div",fe,[H(t("input",{"onUpdate:modelValue":n[0]||(n[0]=o=>f.value=o),type:"text",placeholder:l.value.placeholder,class:"search-input",onKeyup:J(W,["enter"])},null,40,ge),[[j,f.value]]),f.value?(i(),s("button",{key:0,class:"clear-btn",onClick:b,"aria-label":"清空",title:"clear"},n[5]||(n[5]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))):x("",!0),t("button",{onClick:W,class:"search-btn",title:"search"},n[6]||(n[6]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])])]),c.value.length?(i(),s("div",me,[(i(!0),s(M,null,$(c.value,o=>(i(),s("a",{key:o.id,href:o.url,target:"_blank"},[t("img",{src:o.img,alt:"广告"},null,8,we)],8,pe))),128))])):x("",!0),d.value.length?(i(),s("div",_e,[(i(!0),s(M,null,$(d.value,o=>(i(),s("a",{key:o.id,href:o.url,target:"_blank"},[t("img",{src:o.img,alt:"广告"},null,8,ke)],8,be))),128))])):x("",!0),E(re,{cards:L.value},null,8,["cards"]),t("footer",ye,[t("div",Ce,[t("button",{onClick:n[1]||(n[1]=o=>g.value=!0),class:"friend-link-btn"},n[7]||(n[7]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),t("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1),N(" 友情链接 ")])),n[8]||(n[8]=t("p",{class:"copyright"},[N("Copyright © 2025 Nav-Item | "),t("a",{href:"https://github.com/eooce/Nav-Item",target:"_blank",class:"footer-link"},"Powered by eooce")],-1))])]),g.value?(i(),s("div",{key:2,class:"modal-overlay",onClick:n[4]||(n[4]=o=>g.value=!1)},[t("div",{class:"modal-content",onClick:n[3]||(n[3]=K(()=>{},["stop"]))},[t("div",Me,[n[10]||(n[10]=t("h3",null,"友情链接",-1)),t("button",{onClick:n[2]||(n[2]=o=>g.value=!1),class:"close-btn"},n[9]||(n[9]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),t("div",$e,[t("div",Ie,[(i(!0),s(M,null,$(y.value,o=>(i(),s("a",{key:o.id,href:o.url,target:"_blank",class:"friend-link-card"},[t("div",Se,[o.logo?(i(),s("img",{key:0,src:o.logo,alt:o.title,onError:V},null,40,xe)):(i(),s("div",Be,I(o.title.charAt(0)),1))]),t("div",De,[t("h4",null,I(o.title),1)])],8,Le))),128))])])])])):x("",!0)],4)}}},Te=D(Re,[["__scopeId","data-v-8ee0189f"]]);export{Te as default};
